/*
Loot That Auto Mod For Grand Theft Auto: Vice City
Te da la posibilidad de lootear cualquier vehiculo en el juego

Version actual: v1.1 (30/07/2024)

Planes para la v1.2
- Si looteas vehiculos de la policia, podras encontrar armas o municion...
- Si looteas vehiculos de pandillas, podras encontrar mas dinero de lo usual...

LOOT THAT AUTO para GTA 3 y SAN ANDREAS proximamente...
*/
{$CLEO .cs}
0000: 

const
    LOOTEADO = 0@ //0 = no puedes lootear 1 = ya puedes lootear
    BUSCAR = 1@ // 3/10 probabilidades de encontrar dinero
    DINEROLOOT = 2@ // La cantidad de dinero que encontraste en el vehiculo
    CARRO = 3@ // vehiculo actual
    LASTCARRO = 4@ // ultimo vehiculo que manejaste o te subiste
    ISSAMECAR = 8@ // 0 = el vehiculo actual es diferente al ultimo 1 = son el mismo vehiculo
end

//ISSAMECAR = 0
LOOTEADO = 0


04C4: create_coordinate 5@ 6@ 7@ from_actor $PLAYER_ACTOR offset 0.0 0.0 0.0
05F0: LASTCARRO = random_vehicle_near_point 5@ 6@ 7@ in_radius 15.0 find_next 0 pass_wrecked 0 //IF and SET
/*
LAS 2 LINEAS DE CODIGO DE ARRIBA: 
AL CARGAR LA PARTIDA, EL ULTIMO VEHICULO SERA ELEGIDO RANDOM.
NORMALMENTE, ESTE VENDRA SIENDO EL MAS CERCANO AL JUGADOR 
AL CARGAR LA PARTIDA... NORMALMENTE CLARO xD
*/
 
// CHECKCAR: Checar constantemente que este en un vehiculo  
// - SI ESTA EN UN COCHE, CHECAR SI ES EL MISMO AL ULTIMO QUE SE SUBIO
// - SI NO ES, ACTUALIZAR EL ULTIMO VEHICULO GUARDANDOLO Y DIRECTAMENTE INTENTAR LOOTEARLO
// - UNA VEZ GUARDADO, NO PODRAS LOOTEAR EL MISMO CARRO OTRA VEZ (eventualmente podras hacerlo xD)
:checkcar 
wait 0 
if
    00DF:   actor $PLAYER_ACTOR in_any_car
then      
    03C0: CARRO = actor $PLAYER_ACTOR car_no_save
    if
       8039: not CARRO == LASTCARRO   
    then
        ISSAMECAR = 0
        0085: LASTCARRO = CARRO
        jump @lootcar
    else
        //0ACA: "Es el mismo vehiculo."
        ISSAMECAR = 1
        jump @checkcar
    end
else
    jump @checkcar
end

/*
LOOTCAR: UNA VEZ PASADO TODO LO NECESARIO EN CHECKCAR...
- CHECAR OTRA VEZ SI EL JUGADOR ESTA DENTRO DE UN VEHICULO
- SOLO PUEDES LOOTEAR UNA SOLA VEZ 
- COMO MENCIONE ANTES, SI PUEDES LOOTEAR 2 VECES EL MISMO COCHE, EN TEORIA VAYA, 
  SOLO SI DEJAS EL COCHE, TE SUBES A OTRO Y ESPERAS EL COOLDOWN Y TE METES OTRA VEZ AL MISMO COCHE
- HAY UN COOLDOWN DE 10s ANTES DE VOLVERA PODER INTENTAR LOOTEAR
*/
:lootcar
wait 0
if and
    00DF:   actor $PLAYER_ACTOR in_any_car  
    LOOTEADO == 0
    ISSAMECAR == 0
then
    wait 0            
    LOOTEADO = 1
    0209: BUSCAR = random_int_in_ranges 0 11
    if
        BUSCAR > 8
    then
        wait 1000
        0209: DINEROLOOT = random_int_in_ranges 5 30 
        0ACE: show_formatted_text_box "Encontraste $%d en el vehiculo..." DINEROLOOT 
        0109: player $PLAYER_CHAR money += DINEROLOOT
    else
        //0ACA: "No encontraste big nada en el vehiculo..."                 
    end
    wait 10000 // cooldown
    LOOTEADO = 0
    //0ACA: "Ya puedes intentar lootear."
    jump @checkcar
else
    jump @checkcar       
end


 
/*
Notas... Borrar a la verga si ya no se ocupan
0ACA = show text box
0ADF: add_dynamic_GXT_entry "mensaje1" text "este mensaje es de prueba"
03E5: text_box 'mensaje1'
0ADC: para nombrar trucos nuevos "HESOYAM"
0085: 0@ = 1@
8039: not 0@ == 1@   ( 0@ != 1@ )
*/    





 



